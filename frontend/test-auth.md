# 前端认证系统测试指南

## 🚀 启动服务

### 1. 启动后端服务
```bash
cd backend
npm run start:dev
```

### 2. 启动前端服务
```bash
cd frontend
npm run dev
```

## 🧪 功能测试

### 测试 1: 未登录状态
1. 访问 http://localhost:3000
2. ✅ 应该看到欢迎页面
3. ✅ 显示系统介绍和功能特性
4. ✅ 有"立即登录"按钮
5. ✅ 不显示用户仪表板内容

### 测试 2: 登录页面
1. 点击"立即登录"或访问 http://localhost:3000/login
2. ✅ 显示登录表单
3. ✅ 有邮箱和密码输入框
4. ✅ 显示测试账户列表
5. ✅ 点击"使用"按钮自动填充表单

### 测试 3: 登录功能
使用以下测试账户：

#### 管理员账户
- 邮箱: admin@example.com
- 密码: admin123
- 预期: 登录成功，看到完整仪表板和所有菜单

#### 经理账户  
- 邮箱: manager@example.com
- 密码: manager123
- 预期: 登录成功，看到经理级别的功能

#### 普通用户账户
- 邮箱: user1@example.com
- 密码: user123
- 预期: 登录成功，看到基础功能

### 测试 4: 登录后状态
登录成功后验证：
1. ✅ 自动重定向到首页
2. ✅ 显示"欢迎回来，[用户名]"消息
3. ✅ 导航栏显示用户头像
4. ✅ 头像下拉菜单显示用户信息和角色

### 测试 5: 角色权限控制

#### 管理员 (ADMIN) 应该看到:
- ✅ 首页、案例管理、用户管理、设置 菜单
- ✅ 所有统计卡片
- ✅ 用户管理快速操作按钮

#### 经理 (MANAGER) 应该看到:
- ✅ 首页、案例管理、设置 菜单（无用户管理）
- ✅ 大部分统计卡片
- ✅ 案例管理相关功能

#### 普通用户 (USER) 应该看到:
- ✅ 首页、案例管理 菜单
- ✅ 基础统计信息
- ✅ 案例创建和查看功能

### 测试 6: 路由保护
1. 登出后访问 http://localhost:3000/cases
2. ✅ 应该自动重定向到 /login
3. ✅ 登录后重定向回原页面

### 测试 7: 登出功能
1. 点击用户头像
2. 点击"登出"
3. ✅ 显示登出成功提示
4. ✅ 重定向到登录页
5. ✅ 清除用户状态

### 测试 8: 响应式设计
1. 在移动设备或调整浏览器窗口大小
2. ✅ 登录页面适配移动端
3. ✅ 导航栏显示汉堡菜单
4. ✅ 侧边栏菜单正常工作

### 测试 9: 错误处理
1. 使用错误的登录凭据
2. ✅ 显示错误提示信息
3. ✅ 不清除表单内容
4. ✅ 错误消息可以关闭

### 测试 10: 状态持久化
1. 登录后刷新页面
2. ✅ 保持登录状态
3. ✅ 用户信息正确显示
4. ✅ 权限设置保持有效

## 🐛 常见问题排查

### 问题 1: 登录后白屏
- 检查控制台错误信息
- 确保后端服务正在运行
- 检查 API 请求是否成功

### 问题 2: 角色权限不生效
- 检查用户数据是否正确加载
- 验证角色字段值是否匹配
- 检查权限组件是否正确使用

### 问题 3: 路由重定向失败
- 检查中间件配置
- 验证认证状态检查逻辑
- 确认路由路径配置正确

### 问题 4: 移动端显示异常
- 检查 Tailwind CSS 响应式类
- 验证组件在不同屏幕尺寸下的表现
- 测试触摸交互功能

## ✅ 验收标准

### 基础功能 (必须)
- [ ] 用户可以成功登录和登出
- [ ] 角色权限控制正常工作
- [ ] 路由保护生效
- [ ] 响应式设计适配移动端

### 用户体验 (重要)
- [ ] 登录流程顺畅无卡顿
- [ ] 错误信息清晰易懂
- [ ] 状态变化有适当的反馈
- [ ] 界面美观符合设计规范

### 技术要求 (重要)
- [ ] 代码结构清晰，组件复用性好
- [ ] 状态管理正确，无内存泄漏
- [ ] API 集成稳定，错误处理完善
- [ ] 安全性措施到位

## 🎯 后续优化方向

1. **添加记住我功能**
2. **实现自动刷新 Token**
3. **添加多因素认证**
4. **优化登录表单验证**
5. **添加密码强度检查**
6. **实现社交登录集成**